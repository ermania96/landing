function favorite(a,c){if(is_login){var d=$("input[name=csrf_token]").val();$.ajax({url:base_url+"user/favorite",method:"POST",data:{movie_id:a,csrf_token:d},dataType:"json",success:function(b){1==b.status&&(1==c?$(".btn-favorite-"+a).hasClass("remove-favorite")?($(".btn-favorite-"+a).text("Add to favorite"),$(".btn-favorite-"+a).removeClass("remove-favorite"),$(".btn-favorite-"+a).addClass("add-favorite")):$(".btn-favorite-"+a).hasClass("add-favorite")&&($(".btn-favorite-"+a).text("Remove favorite"),
    $(".btn-favorite-"+a).removeClass("add-favorite"),$(".btn-favorite-"+a).addClass("remove-favorite")):(alert(b.message),$(".bp-btn-like").hasClass("active")?$(".bp-btn-like").removeClass("active"):$(".bp-btn-like").addClass("active")),$(".csrf-token").html(b.csrf_token))}})}else $("#pop-login").modal("show")}
$("input[name=rating]").change(function(){if(is_login){var a=$(this).val(),c=$(this).attr("movie-id"),d=$("input[name=csrf_token]").val();$.ajax({url:base_url+"user/rating",method:"POST",data:{movie_id:c,mark:a,csrf_token:d},dataType:"json",success:function(b){1==b.status&&($("input[name=rating]").rating("refresh",{disabled:!0}),$("#movie-mark").text(b.mark),$("#movie-rating").text("Rating ("+b.rating+")"),$(".csrf-token").html(b.csrf_token))}})}else $("#pop-login").modal("show")});
$("#request-form").submit(function(a){var c=$(this).serializeArray(),d=$(this).attr("action");$.ajax({url:d,type:"POST",data:c,dataType:"json",success:function(b){$(".error-block").hide();if(0==b.status){for(var a in b.messages)$("#error-"+a).show(),$("#error-"+a).text(b.messages[a]);$(".csrf-token").html(b.csrf_token)}1==b.status&&($("#message-success").show(),setTimeout(function(){$("#message-success").hide()},5E3),document.getElementById("request-form").reset())}});a.preventDefault()});
